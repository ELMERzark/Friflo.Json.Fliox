<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Test page for Json.Fliox.Hub to browse databases and send requests via HTTP and WebSocket to Hub">
    <meta name="color-scheme" content="dark light">
    <link rel="icon"     href="/Json-Fliox-53x43.svg" type="image/x-icon">
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#606060">
    <title>Json.Fliox.Hub</title>
    <script>
        // handle dark mode before everything else to avoid flickering
        window.appConfig = { monacoTheme: "light" };
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.setAttribute('data-theme', 'dark');
            window.appConfig.monacoTheme = "vs-dark";
        }
    </script>
    <script src='bundle.js'></script> <!-- todo: load deferred -->
    <script type="module">
        import { app } from  "./index.js";
        window.app = app;
        app.loadConfig();
        app.initUserToken();
        app.loadExampleRequestList();
        app.loadCluster();
        app.addTableResize();
        app.openTab(app.getConfig("activeTab"));
    </script>
    <style>
        :root {
            --header-height: 60px;
            --tab-height:    40px;
            --vbar-width: 4px;            
            --mono-font: 'Consolas', 'Courier New', Courier, monospace;
            --mono-size:  14px;
            /* light */
            --selected-color: #0000ff18;
            --tab-color:    #e8e8e8;
            --tab-hover:    #e0e0e0;
            --tab-border:   #ffffff;
            --editor-border:#e8e8e8;
            --background:   #f4f4f4;
            --background2:  #ffffff;
            --background3:  #f0f0f0;
            --item-hover:   #e8e8e8;
            --command-bar:  #d9d9ff;
            --link-color:   #d400b8;
            --link-deco:    #00000040;
            --color:        #000;
        }
        [data-theme="dark"] {
            --selected-color: #44fa;
            --tab-color:    #303030;
            --tab-hover:    #606060;
            --tab-border:   #1e1e1e;
            --editor-border:#000;
            --background:   #000;
            --background2:  #1e1e1e;
            --background3:  #000;
            --item-hover:   #444;
            --command-bar:  #5f5f92;
            --link-color:   #e64bd1;
            --link-deco:    #ffffff60;
            --color:        #fff;
        }

        /* text-decoration: underline;      text-decoration-color: var(--link-deco) !important;
           text-decoration-thickness: 2px;  color: color: var(--link-color) !important */
        .refLinkDecoration          { color: var(--link-color) !important;  }
        .refLinkDecoration:hover    { text-decoration: underline; text-decoration-thickness: 2px; text-decoration-color: var(--link-deco) !important; }

        .navigate           { cursor: pointer; font-size: 14px; height: 20px; width: 20px; text-align: center; user-select: none; border-radius: 2px;}
        .navigate:hover     { background-color: var(--tab-hover); }
        .navigate:active    { background-color: var(--background3); font-size: 13.5px; box-shadow: inset 1px 1px 1px #00000010; }

        /* dark mode color for firefox */
        @media(prefers-color-scheme: dark) {
            body  { background-color: #000; color: #fff; }
            a:visited   { color: rgb(208, 173, 240) }
            a           { color: rgb(158, 158, 255) }
        }
        /** ---------------------------------------------- Grid Layout ----------------------- */
        body {
            display: grid;
            grid-template-areas: 
                "body-header"
                "body-tabs"
                "body-playground"
                "body-explorer"
                "body-settings";
            grid-template-columns:  1fr;
            grid-template-rows:     var(--header-height) var(--tab-height) 0 1fr 0; /* dynamically overwritten by body.style */
            grid-gap:   0px;
            margin:     0;
            height:     100vh;
        }

        .editor { height: 100%; }
        
        #playground {
            display: none;
            grid-template-areas: 
                "pl-header          pl-header   pl-header"
                "pl-title-req       .           pl-title-resp"
                "pl-request         pl-bar      pl-response";
            grid-template-columns:  300px 5px 1fr;  /* dynamically overwritten by #playground.style */
            grid-template-rows:     28px  25px 1fr;
            grid-gap:   0px;
        }

        #explorer {
            display: grid;
            grid-template-areas: 
                "ex-filter      .           ex-filter-input     ex-filter-input     ex-filter-input"
                ".              .           ex-schema           .                   ex-action"
                "ex-link-db     .           ex-link-container   .                   ex-link-entity"
                "ex-database    ex-bar1     ex-container        ex-bar2             ex-entity";
            grid-template-columns:  150px 5px 200px 5px 1fr;    /* dynamically overwritten by #explorer.style */
            grid-template-rows:     28px 28px 20px 1fr;
            grid-gap:   0px;
        }
        /** ---------------------------------------------- Grid Layout end ----------------------- */

        .dropbtn {
            background-color: lightgrey;
            color: white;
            padding:    0px;
            border:     1px solid #aaa;
            width:      16px;
        }
        .authInput { width: 100px; }
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 110px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            cursor: default;
            font-size: 14px;
        }
        .dropdown-content div {
            color: black;
            padding: 2px 6px;
            text-decoration: none;
            display: block;
        }
        .dropdown-content div:hover           { background-color: #ddd;}
        .dropdown:hover .dropdown-content   { display: block;}
        .dropdown:hover .dropbtn            { background-color: grey;}

        

        html            { max-width: 100%; overflow-x: hidden; } /* disable horizontal scrollbar */
        a               { text-decoration:  none; }
        tr              { vertical-align:   top; }
        button          { width:            80px; font-size: 14px;}
        .inline         { display:          inline; }
        h2              { margin:           0px;  }
        label           { display:          inline;  }
        input           { display:          inline;  }
        .nobreak *      { white-space:      nowrap; }
        .pre *          { white-space:      pre; }
        table.header td { padding-right:    10px; }
        li              { font-size:        14px;}
        sup             { font-size: 10px; color: rgb(143, 143, 255);}
        ul              { margin: 5px; padding-left: 15px; }
        td              { padding: 0px; }
        /* [html - How do I make a placeholder for a 'select' box? - Stack Overflow] https://stackoverflow.com/questions/5805059/how-do-i-make-a-placeholder-for-a-select-box */
        select:required:invalid     {  color: gray;  }
        option[value=""][disabled]  {  display: none;  }
        option                      {  color: black; }

        .vbar           { width: var(--vbar-width); min-width: var(--vbar-width); padding: 0px; background-color: var(--background3); }

        .toggleDescription                  { width: 23px; height: 23px; transform: rotate(270deg) translate(0px, 5px);
                                              opacity: 0.4; cursor: pointer; border-radius: 2px; }
        .toggleDescription::before          { content: "❯" }
        .toggleDescription:hover            { background-color: var(--tab-hover); }
        .expand .toggleDescription          { width: 53px; height: 43px; transform: rotate(0) scale(0.8) translate(-0px, -17px);
                                              background-image: url("Json-Fliox-53x43.svg");  opacity: 1;  }
        .expand .toggleDescription::before  { content: unset }
        #toggleDescription                  { min-width: 33px;}
        #toggleDescription.expand           { min-width: 60px;}



        .tab            { cursor: pointer; background-color: var(--tab-color); color: var(--color)!important;;
                          border: 1px solid var(--tab-border); margin: 0px; padding: 5px 10px; }
        .tab:hover      { background-color: var(--tab-hover);   border-bottom: 1px solid #ffffff00; }
        .tab.selected   { background-color: var(--background);  border-bottom: 1px solid #ffffff00; }
        .tabContent     { display: none; border-top: none; background-color: var(--background); }

        .applyFilter        { cursor: pointer; border-radius: 2px; width: 28px; height: 14px; display:inline-block; text-align: center;
                              margin-right: 1px; font-size: 11px; padding-top: 5px; padding-bottom: 5px; }
        .applyFilter:hover  { background-color: var(--tab-hover); }
        .applyFilter:active { background-color: var(--background3); font-size: 10px; box-shadow: inset 1px 1px 1px #00000010; }

        .filter         { height: 18px; font-size: var(--mono-size); color: var(--color); font-family: var(--mono-font); width:100%; 
                          background-color: transparent;  margin: 0px 0px 5px 0px; padding: 0px 3px;    border: 0.5px solid #88888800;       }
        .filter:hover   { background-color: transparent;  margin: 0px 0px 5px 0px; padding: 0px 3px;    border: 0.5px solid var(--tab-border); }
        .filter:focus   { background-color: var(--background2);  outline: none !important;              border: 0.5px solid #88888800;}
        .filter::placeholder { opacity: 0.3; color: var(--color); font-family: Arial, Helvetica, sans-serif; font-size: 12px; }


        .caret                      { display: inline-block; width: 12px; height: 12px; cursor: default; text-align: center; font-size: 10px;}
        .caret::before              { content: "❯"; } /* using ::before avoids getting copied to clipboard */
        .caret:hover                { font-weight: bold; color: darkturquoise;}

        .catalogs > ul              { padding-left: 0px; padding-right: 0px; }
        .catalogs > ul > li > ul    { margin-top: 0px; margin-left: 0px; display: none; }
        .catalogs > ul > li.active > ul    { display: block; }
        .catalogs > ul > li.active > div > div    { -ms-transform: rotate(90deg); -webkit-transform: rotate(90deg); transform: rotate(90deg) }
        .catalogs li                { list-style:none; }
        .catalogs li                { cursor: pointer; }
        .catalogs ul li div.selected{ background-color: var(--selected-color); }
        .catalogs li div.selected   { background-color: var(--selected-color); }
        .catalogs ul li div:hover   { background-color: var(--item-hover); }

        .entities                   { padding-left: 0px; }
        .entities li                { cursor: pointer; list-style:none; display: flex; justify-content: space-between; }
        .entities li.selected       { background-color: var(--selected-color); }
        .entities li:hover          { background-color: var(--item-hover); }

        .database                           { padding-left: 0px; margin-right: 0px; }
        .database li > ul                   { padding-left: 0px; margin-top: 0px; margin-left: 0px; }
        .database li ul li                  { padding-left: 0px; cursor: pointer; list-style:none; display: flex; justify-content: space-between; }
        .database li ul li.selected         { background-color: var(--selected-color); }
        .database li ul li:hover            { background-color: var(--item-hover); }
        .database li ul li:hover .command   { display: block;  }

        .command                    { display: none; padding-left: 2px; padding-right: 2px; font-size: 12px; }
        .command:hover              { background-color:#090; color: white;  }
        .command:active             { background-color:#0c0; }
        .command::before            { content: "▶"; width: 26px; display: inline-block; text-align: center; }

        .settings li                { list-style: none; }

        .reload                     { cursor:pointer; opacity:0.5; user-select: none; font-size: 13px; border-radius: 2px; }
        .reload::after              { content: "⭮"; padding-left: 7px; padding-right: 7px; }    /* using ::after avoids getting copied to clipboard */
        .reload:hover               { background-color: var(--tab-hover); opacity:1; }
        .reload:active::after       { background-color: var(--background3); font-size: 12px; box-shadow: inset 1px 1px 1px #00000010; }

        .spinner {
            border:         3px solid #f3f3f3;
            border-top:     3px solid #3498db;
            border-radius:  50%;
            width:          8px;
            height:         8px;
            animation:      spin 1s linear infinite;
            display:        inline-block;
            margin-left:    10px;
        }
        @keyframes spin {
            0%      { transform: rotate(0deg); }
            100%    { transform: rotate(360deg); }
        }
    </style>
</head>

<body style="grid-template-rows: var(--header-height) var(--tab-height) 0 1fr 0; font-family: sans-serif; background-color: var(--background2);"
    onmousemove="app.onDrag(event)" onmouseup="app.endDrag()">
  <!--- [monaco-editor-samples/index.html at main · microsoft/monaco-editor-samples]
        https://github.com/microsoft/monaco-editor-samples/blob/main/browser-script-editor/index.html --->
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.css"/>
  <script>
     var require = { paths: { vs: 'https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs' } };
  </script>
  <script src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/loader.js"></script>
  <script src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
  <script src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.js"></script>
  <script type="module">
    app.setupEditors();
  </script>

  <div style="grid-area: body-header; overflow: hidden;">
  <table class="header" style="width: max-content;">
    <tr>
      <td style="padding: 5px;">
        <a href="https://github.com/friflo/Friflo.Json.Fliox/blob/main/Json.Tests/Main/Program.cs" target='_blank' rel='noopener'>
          <img src='/Json-Fliox-53x43.svg' width="53" height="43" alt="friflo JSON Fliox">
        </a>
      </td>
      <td style="padding: 5px;">
        <h2>Json.Fliox.Hub</h2>
        <a target='_blank' rel='noopener' href="./schema/index.html">schema</a> | <a target='_blank' rel='noopener' href="./protocol/index.html">protocol</a>
      <td>
        <ul>
            <li>ORM C# - remote, file, memory, NoSQL, ...</li>
            <li>CRUD, query & relations</li>
            <li>API: REST & POST to send multiple tasks</li>
        </ul>
      </td>
      <td>
        <ul>
            <li>Instant Messaging & Pub-Sub<sup>1</sup></li>
            <li>Token based user authentication<sup>1</sup></li>
            <li>Role based task authorization<sup>1</sup></li>
        </ul>
      </td>
      <td>
        <ul>
            <li>Access multiple databases<sup>1</sup></li>
            <li>Schema validation<sup>1</sup> & generation<sup>1</sup></li>
            <li>Monitor requests, tasks & events<sup>1</sup></li>
        </ul>
      </td>
      <td>
        <span style="float:right;"><sup>1</sup> <span style="font-size: 11px; font-style: italic;">optional</span></span>
      </td>
    </tr>
  </table>
  </div>
  <!-- [How To Create Tabs] https://www.w3schools.com/howto/howto_js_tabs.asp -->
  <div style="grid-area: body-tabs; overflow:initial; white-space:nowrap; margin-top: 10px; display:flex;">
    <div id="toggleDescription" onclick="app.toggleDescription()" style="border-bottom: 1px solid var(--tab-border); margin: 0;" title="toggle Hub description">
        <div class="toggleDescription" ></div>
    </div>
    <a class="tab" href="#" onclick="app.openTab('playground')" style="border-top-left-radius:  3px;">Playground</a>
    <a class="tab" href="#" onclick="app.openTab('explorer')"                                        >Explorer</a>
    <a class="tab" href="#" onclick="app.openTab('settings')"   style="border-top-right-radius: 3px;"><b>⋮</b></a>
    <span style="border-bottom: 1px solid var(--tab-border); width:100%; padding-left: 30px;">
      <label for="user"><code>user</code></label>   <input onchange="app.setUser(value)"  spellcheck="false" type="text" id="user"  class="authInput" value="admin">&nbsp;
      <label for="token"><code>token</code></label> <input onchange="app.setToken(value)" spellcheck="false" type="text" id="token" class="authInput" value="admin">    
      <div class="dropdown">
        <button class="dropbtn">▼</button>
        <div class="dropdown-content">
          <div onclick="app.selectUser(this)">admin</div>
          <div onclick="app.selectUser(this)">cluster-admin</div>
          <div onclick="app.selectUser(this)">poc-admin</div>
          <div onclick="app.selectUser(this)">poc-readonly</div>
          <div onclick="app.selectUser(this)">monitor-admin</div>
          <div onclick="app.selectUser(this)">user-admin</div>
          <div onclick="app.selectUser(this)">user-readonly</div>
        </div>
      </div>
    </span>
  </div>

  <!-- ------------------------------------------- Playground ------------------------------------------- -->
  <div style="grid-area: body-playground; overflow: hidden; padding-top: 10px;" id="playground" class="tabContent">
    <div style="grid-area: pl-header; overflow:hidden; white-space:nowrap; padding-left: 7px;">
      <select required title="example-requests" id="example" onchange="app.onExampleChange()"></select>
      <button type="button" onclick="app.postSyncRequest()" title="POST request (Ctrl+Alt+P)">POST</button>

      &nbsp;&nbsp;&nbsp;&nbsp; <small>WebSocket</small> &nbsp;
      <button type="button" onclick="app.sendSyncRequest()"  title="Send websocket request (Ctrl+Alt+Enter)">send</button>
      &nbsp;&nbsp;
      <button type="button" onclick="app.connectWebsocket()" title="connect WebSocket">connect</button> 
      <button type="button" onclick="app.closeWebsocket()"   title="close WebSocket">close</button> &nbsp;
      <small id="socketStatus" class="inline">disconnected</small> &nbsp;&nbsp;&nbsp;&nbsp;
    </div>

    <div style="grid-area: pl-title-req; padding-left: 7px;">
        <small style="opacity: 0.7;">Request</small>
        <div style="opacity: 0.6; float: right;" title="properties added to request on: WebSocket send">
            <code>req:<div id="req" class="inline"><span style="opacity: 0.4;">-</span></div></code>
            <code>ack:<div id="ack" class="inline"><span style="opacity: 0.4;">-</span></div></code>
            <code>clt:<div id="clt" class="inline"><span style="opacity: 0.4;">-</span></div></code>
        </div>
    </div>
    
    <div style="grid-area: pl-title-resp; padding-right: 7px;" class="nobreak">
      <small style="opacity: 0.7;">Response</small> <small id="response-state"></small>
      <small style="opacity: 0.7; cursor: default;" title="all WebSocket messages (request, response & event): DevTools · Network · ws-* · Messages">🛈</small>
      
      <span style="float:right;">
        <small>events: <span id="subscriptionCount">0</span></small>&nbsp;
        <code style="font-weight: bold">"seq": <span id="subscriptionSeq">-</span></code>
      </span>
    </div>

    <div  style="grid-area: pl-request; border-right: 0px; overflow:hidden;">
        <div class="editor" id="requestContainer"></div>
    </div>
    <div id="plBar" style="grid-area: pl-bar; cursor: ew-resize;" class="vbar" onmousedown="app.startDrag(event, 'playground', id)"></div>
    <div class="editor" style="grid-area: pl-response; border-left: 0px; overflow:hidden;">
        <div class="editor" id="responseContainer"></div>
    </div>
  </div>

  <!-- ------------------------------------------- Explorer ------------------------------------------- -->
  <div style="grid-area: body-explorer; overflow: hidden; grid-template-columns: 150px 5px 200px 5px 1fr; padding-top: 5px;"
       id="explorer" class="tabContent">
    <!-- ------- filter ------- -->
    <div id="filterRow" style="grid-area: ex-filter; visibility: hidden; margin-top: -2px;">
      <div style="float: right; overflow-y: hidden; height: 28px;">
         <a id="removeFilter" style="width: 20px; color: red; font-weight: bold; visibility: hidden;"
            href="#" class="applyFilter" title="Remove filter" onclick="app.removeFilter()">✖</a><!--
      --><a href="#" class="applyFilter" title="Apply filter" onclick="app.applyFilter()">🔎</a><!--
      --><a id="filterLink" title="open filter in new tab" style="opacity: 0.7;" href="#" target="_blank" onclick="app.updateFilterLink()"><!--
        --><small>filter</small>
         </a>
         <small style="margin-left: 5px; opacity: 0.5;" title="parameter o used for lambda expression body">o&nbsp;=></small>
      </div>
    </div>
    <div style="grid-area: ex-filter-input;">
      <input id="entityFilter" style="visibility: hidden;" title="entity filter" class="filter" type="text" spellcheck="false" placeholder="lambda expression predicate ⊂ LINQ where"
        onkeyup="app.filterOnKeyUp(event)" onchange="app.updateFilterLink()">     
    </div>

    <!-- ------- schema link, entity command/type ------- -->
    <div style="grid-area: ex-schema; overflow:auto; white-space:nowrap; text-align: center; overflow:hidden;">
      <small id="catalogSchema"><span style="opacity: 0.4;">schema</span></small>
    </div>
    <div style="grid-area: ex-action; display:flex; overflow:hidden; white-space:nowrap; height: 23px;">
        <span style="min-width: 350px;">
        <span id="entityTools" style="display: none;">
            <button type="button" onclick="app.deleteEntity()" title="Delete entity via a DELETE request">Delete</button>
            <button type="button" onclick="app.saveEntity()" title="Save entity via a PUT request (Ctrl+S)">Save</button>
            &nbsp;&nbsp;
            <small id="entityType" title="entity type"><span style="opacity: 0.4;">entity type</span></small>
        </span>
        <span id="commandTools" style="display: none;">
            <button type="button" onclick="app.sendCommand('POST')" title="Send command via a POST request (Ctrl+Alt+P)"">POST</button>
            &nbsp;
            <small id="commandSignature">command</small>
        </span>
        </span>
        <div title="Go back (Alt + 🠔)"    class="navigate" onclick="app.navigateEntity(app.entityHistoryPos - 1)">⏴</div>
        <div title="Go forward (Alt + ➞)" class="navigate" onclick="app.navigateEntity(app.entityHistoryPos + 1)">⏵</div>
    </div>

    <!-- ------- resource titles/links ------- -->
    <div style="grid-area: ex-link-db; ; overflow:hidden; padding-left: 7px;">
        <small><a href="./rest" target="_blank" rel="noopener noreferrer" title="open databases hosted by Hub in new tab">databases</a></small>
    </div>
    <div style="grid-area: ex-link-container; overflow:hidden; white-space:nowrap">
        <small>
        <span id="readEntitiesDB"><span style="opacity: 0.4;">database/</span></span><span id="readEntities"><span style="opacity: 0.4;">container</span></span>
        </small>
    </div>
    <div style="grid-area: ex-link-entity; overflow:hidden; white-space:nowrap">
        <span id="entityHeader" style="display: none;">
        <small id="entityId">entity id</small>
        </span>
        <span id="commandHeader" style="display: none;" >
        <small id="commandLink">command</small>
        </span>
        <small id="writeResult"></small>
    </div>

    <!-- ------- database tree, container list, editors ------- -->
    <div style="grid-area: ex-database; border-right: 0px; background-color: var(--background2); overflow: auto; ">
      <div class="catalogs" id="catalogExplorer" style="display: block; min-height: 50px; white-space: nowrap;">
        <!-- [How To Create a Tree View] https://www.w3schools.com/howto/howto_js_treeview.asp -->
      </div>
    </div>
    <div id="exBar1" style="grid-area: ex-bar1; cursor: ew-resize;" class="vbar" onmousedown="app.startDrag(event, 'explorer', id)"></div>
    <div style="grid-area: ex-container; border-left: 0px; border-right: 0px; background-color: var(--background2); overflow: auto; ">
      <div id="entityExplorer"  style="display: block; white-space:nowrap;"></div>
    </div>
    <div id="exBar2" style="grid-area: ex-bar2; cursor: ew-resize;" class="vbar" onmousedown="app.startDrag(event, 'explorer', id)"></div>
    <div style="grid-area: ex-entity; display: grid; border-left: 0px; overflow: hidden;">
      <span style="display: inline-flex;">
        <div id="commandValueContainer" style="width: 100%; display: none; overflow: hidden;">
            <div class="editor" id="commandValue" style="border: 0px solid; border-right: 0px solid var(--background3);"></div>
        </div>
        <div id="commandParamBar" class="vbar" style="min-width: var(--vbar-width); width: var(--vbar-width); background-color: var(--command-bar);"></div>
        <div style="width: 100%; overflow: hidden;">
            <div class="editor" id="entityContainer" style="border: 0px solid;"></div>
        </div>
      </span>
    </div>
  </div>

  <!-- ------------------------------------------- Settings ------------------------------------------- -->
  <div id="settings" class="tabContent" style="grid-area: body-settings; overflow: hidden; padding: 10px;">
    <div>
    <div>Settings</div>
    <div class="settings">
      <ul>
        <li>
            <input type="checkbox" id="showLineNumbers"  onclick="app.changeConfig(id, checked)">
            <label for="showLineNumbers">Editor: Line numbers</label>
        </li>
        <li>
            <input type="checkbox" id="showMinimap"  onclick="app.changeConfig(id, checked)">
            <label for="showMinimap">Editor: Minimap</label>
        </li>
        <br>
        <li>
          <input type="checkbox" id="formatEntities"  onclick="app.changeConfig(id, checked)">
          <label for="formatEntities">Format entities received from server</label>
        </li>
        <li>
          <input type="checkbox" id="formatResponses" onclick="app.changeConfig(id, checked)">
          <label for="formatResponses">Format responses</label>
        </li>
      </ul>
    </div>
    </div>
  </div>
  
</body>
</html>