{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$comment": "Generated by: https://github.com/friflo/Friflo.Json.Fliox/tree/main/Json/Fliox/Schema",
    "definitions": {
        "JsonSchema": {
            "type": "object",
            "description": "Compatible subset of JSON Schema with some extensions required for code generation.\n             JSON Schema specification: https://json-schema.org/specification.html\n            \n             Following extensions are added to JSON Schema:\n             <list><item><b>extends</b></item><item><b>discriminator</b></item><item><b>isStruct</b></item><item><b>isAbstract</b></item><item><b>messages</b></item><item><b>commands</b></item><item><b>key</b></item><item><b>relation</b></item></list>\n             The restriction of <b>JsonSchema</b> are:\n             <list><item>\n                 A schema property cannot nest anonymous types by 'type': 'object' with 'properties': { ... }.\n                 The property type needs to be a known type like 'string', ... or a referenced ('$ref') type.\n                 This restriction enables generation of code and types for languages without support of anonymous types.\n                 It also enables concise error messages for validation errors when using <b>TypeValidator</b>.\n               </item><item>\n                 Note: Arrays and dictionaries are also valid schema properties. E.g. \n\n                 A valid array property like: <code>{ 'type': ['array', 'null'], 'items': { 'type': 'string' } }</code\n\n                 A valid dictionary property like:  <code>{ 'type': 'object', 'additionalProperties': { 'type': 'string' } }</code\n\n                 These element / value types needs to be a known type like 'string', ... or a referenced ('$ref') type.\n               </item><item>\n                 On root level are only '$ref': '...' and 'definitions': [...] allowed.\n               </item></list>",
            "properties": {
                "$ref":        { "type": ["string", "null"] },
                "definitions": { "additionalProperties": { "$ref": "#/definitions/JsonType" }, "type": "object" }
            },
            "additionalProperties": false
        },
        "JsonType": {
            "type": "object",
            "properties": {
                "extends":              { "oneOf": [{ "$ref": "#/definitions/TypeRef" }, {"type": "null"}] },
                "discriminator":        { "type": ["string", "null"] },
                "oneOf":                { "type": ["array", "null"], "items": { "$ref": "#/definitions/FieldType" } },
                "isAbstract":           { "type": ["boolean", "null"] },
                "type":                 { "type": ["string", "null"] },
                "key":                  { "type": ["string", "null"] },
                "properties":           { "additionalProperties": { "$ref": "#/definitions/FieldType" }, "type": "object" },
                "commands":             { "additionalProperties": { "$ref": "#/definitions/MessageType" }, "type": "object" },
                "messages":             { "additionalProperties": { "$ref": "#/definitions/MessageType" }, "type": "object" },
                "isStruct":             { "type": ["boolean", "null"] },
                "required":             { "type": ["array", "null"], "items": { "type": "string" } },
                "additionalProperties": { "type": "boolean" },
                "enum":                 { "type": ["array", "null"], "items": { "type": "string" } },
                "description":          { "type": ["string", "null"] }
            },
            "required": [
                "additionalProperties"
            ],
            "additionalProperties": false
        },
        "TypeRef": {
            "type": "object",
            "properties": {
                "$ref": { "type": "string" },
                "type": { "type": ["string", "null"] }
            },
            "required": [
                "$ref"
            ],
            "additionalProperties": false
        },
        "FieldType": {
            "type": "object",
            "properties": {
                "type":                 {  },
                "enum":                 { "type": ["array", "null"], "items": { "type": "string" } },
                "items":                { "oneOf": [{ "$ref": "#/definitions/FieldType" }, {"type": "null"}] },
                "oneOf":                { "type": ["array", "null"], "items": { "$ref": "#/definitions/FieldType" } },
                "minimum":              { "oneOf": [{ "$ref": "./Standard.json#/definitions/int64" }, {"type": "null"}] },
                "maximum":              { "oneOf": [{ "$ref": "./Standard.json#/definitions/int64" }, {"type": "null"}] },
                "pattern":              { "type": ["string", "null"] },
                "format":               { "type": ["string", "null"] },
                "$ref":                 { "type": ["string", "null"] },
                "additionalProperties": { "oneOf": [{ "$ref": "#/definitions/FieldType" }, {"type": "null"}] },
                "isAutoIncrement":      { "type": ["boolean", "null"] },
                "relation":             { "type": ["string", "null"] },
                "description":          { "type": ["string", "null"] }
            },
            "additionalProperties": false
        },
        "MessageType": {
            "type": "object",
            "properties": {
                "param":       { "oneOf": [{ "$ref": "#/definitions/FieldType" }, {"type": "null"}] },
                "result":      { "oneOf": [{ "$ref": "#/definitions/FieldType" }, {"type": "null"}] },
                "description": { "type": ["string", "null"] }
            },
            "additionalProperties": false
        }
    }
}

