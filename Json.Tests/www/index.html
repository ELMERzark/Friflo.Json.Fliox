<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Test page for Json.Fliox.DB server to send server commands via WebSocket's">
    <meta name="color-scheme" content="dark light">
    <link rel="icon" href="/Json-Fliox-53x43.svg" type="image/x-icon">
    <title>Json.Fliox.DB server</title>

    <script type="module">
        import { connectWebsocket, closeWebsocket, sendSyncRequest, onExampleChange, loadExampleRequestList, addTableResize } from  "./index.js";
        window.connectWebsocket = connectWebsocket;
        window.closeWebsocket   = closeWebsocket;
        window.sendSyncRequest  = sendSyncRequest;
        window.onExampleChange  = onExampleChange;
        loadExampleRequestList();
        addTableResize();
    </script>
    <style>
        a               { text-decoration:  none; }
        tr              { vertical-align:   top; }
        button          { width:            80px;}
        .inline         { display:          inline; }
        h2              { display:          inline;  }
        textarea        { white-space:      pre;  }
        .alignBottom    { vertical-align:   bottom; }
        .nobreak        { white-space:      pre; }
    </style>

    <!--- [monaco-editor-samples/index.html at main · microsoft/monaco-editor-samples]
          https://github.com/microsoft/monaco-editor-samples/blob/main/browser-script-editor/index.html --->
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.css"/>
    <script>
        var require = { paths: { vs: 'https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs' } };
    </script>
    <script src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/loader.js"></script>
    <script src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
    <script src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.js"></script>
    <script type="module">
        import { setupEditors } from  "./index.js";
        setupEditors();
    </script>
</head>

<body style="font-family: sans-serif">
  <table>
    <tr>
      <td><a href="https://github.com/friflo/Friflo.Json.Fliox/blob/main/Json.Tests/Main/Program.cs" target='_blank' rel='noopener'><img src='/Json-Fliox-53x43.svg' alt="friflo JSON Fliox"></a></td>
      <td>&nbsp;&nbsp;&nbsp;</td>
      <td class="alignBottom"><h2>Json.Fliox.DB server</h2>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td><a href="./schema/index.html">database schema</a> | <a href="./protocol/index.html">protocol</a></td>
    </tr>
  </table>
  <p class="nobreak">Server is the 'Hello World' example to demonstrate database access, messaging and Pub-Sub capabilities.</p>

  Websocket &nbsp;&nbsp;
  <button type="button" onclick="connectWebsocket()">Connect</button> 
  <button type="button" onclick="closeWebsocket()">Close</button> &nbsp;&nbsp;
  status: <div id="socketStatus" class="inline">disconnected</div>
  <br><br>

  <table>
    <tr>
      <td>Request &nbsp;&nbsp;<select title="example-requests" id="example" onchange="onExampleChange()"></select></td>
      <td>Response *</td>
    </tr>
    <tr>
      <td>
        <div id="requestContainer" style="width: 500px; height: 500px; border: 1px solid grey"></div>
        <button type="button" onclick="sendSyncRequest()">Send sync</button> &nbsp;&nbsp;
        reqId: <div id="reqId" class="inline">n/a</div>
      </td>
      <td>
        <div id="responseContainer" style="width: 500px; height: 500px; border: 1px solid grey"></div>
        <small>* all messages: DevTools > Network > websocket-* > Messages</small>
      </td>
    </tr>
  </table>
  
</body>
</html>